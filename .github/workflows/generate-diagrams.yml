- name: Generate Mermaid diagrams
  run: |
    # Create puppeteer config file
    echo '{"args": ["--no-sandbox", "--disable-setuid-sandbox"]}' > puppeteer-config.json
    
    for mmd_file in diagrams/**/*.mmd; do
      if [ -f "$mmd_file" ]; then
        output_file="${mmd_file%.mmd}.png"
        echo "Generating: $mmd_file -> $output_file"
        mmdc -i "$mmd_file" -o "$output_file" -t dark -b transparent -p puppeteer-config.json
      fi
    done
